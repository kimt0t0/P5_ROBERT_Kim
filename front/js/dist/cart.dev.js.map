{"version":3,"sources":["cart.js"],"names":["cart","localStorage","cartCounter","totalPrice","productId","productColor","productQuantity","Contact","firstName","lastName","address","city","email","value","getProducts","getProduct","id","fetch","then","httpBodyResponse","json","products","product","_id","error","alert","updateCartCounter","i","length","key","Number","checkForm","document","getElementById","regNames","regAddress","regEmail","inputsToTest","regexsToTest","inp","reg","test","tests","globalTest","name","textContent","createTable","productsTable","cartKey","splitKey","split","includes","createData","contact","console","log","orderData","postOrder","data","method","redirect","headers","body","JSON","stringify","response","clear","orderId","window","location","err","hydrateDom","cartItem","createElement","cartItemImg","productImg","cartItemContent","cartItemContentDescr","cartItemContentTitle","cartItemContentColor","cartItemContentPrice","cartItemSettings","settingsQuantity","settingsQuantityText","settingsQuantityInput","deleteContainer","deleteText","appendChild","setAttribute","imageUrl","altTxt","price","addEventListener","e","target","closest","getAttribute","initialQuantity","isInteger","parseInt","reload","orderButton","removeItem","getItem","pageContent","userForm","preventDefault","check","order"],"mappings":";;;;AAAA;AACA,IAAIA,IAAI,GAAGC,YAAX;AAEA,IAAIC,WAAW,GAAG,CAAlB;AACA,IAAIC,UAAU,GAAG,CAAjB;AAEA,IAAIC,SAAJ,EAAeC,YAAf,EAA6BC,eAA7B;AAGA;;IAEMC,O,GACF,iBAAaC,SAAb,EAAwBC,QAAxB,EAAkCC,OAAlC,EAA2CC,IAA3C,EAAiDC,KAAjD,EAAwD;AAAA;;AACpD,OAAKJ,SAAL,GAAiBA,SAAS,CAACK,KAA3B;AACA,OAAKJ,QAAL,GAAgBA,QAAQ,CAACI,KAAzB;AACA,OAAKH,OAAL,GAAeA,OAAO,CAACG,KAAvB;AACA,OAAKF,IAAL,GAAYA,IAAI,CAACE,KAAjB;AACA,OAAKD,KAAL,GAAaA,KAAK,CAACC,KAAnB;AACH,C;AAKL;;AAEA;;AAEA;;;AACA,SAAeC,WAAf,CAA2Bd,IAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;;;AACA,SAAee,UAAf,CAA0BC,EAA1B;AAAA;AAAA;AAAA;AAAA;AAAA,4CACWC,KAAK,CAAC,oCAAD,CAAL,CACJC,IADI,CACC,UAASC,gBAAT,EAA2B;AAC/B,mBAAOA,gBAAgB,CAACC,IAAjB,EAAP;AACD,WAHI,EAIJF,IAJI,CAIC,UAASG,QAAT,EAAmB;AAAA;AAAA;AAAA;;AAAA;AACrB,mCAAgBA,QAAhB,8HAA0B;AAArBC,gBAAAA,OAAqB;;AACtB,oBAAIA,OAAO,CAACC,GAAR,IAAeP,EAAnB,EAAuB;AACrB,yBAAOM,OAAP;AAAgB;AACrB;AAJoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKxB,WATI,WAUE,UAASE,KAAT,EAAgB;AACnB,mBAAOC,KAAK,CAAC,gCAAD,EAAmCD,KAAnC,CAAZ;AACH,WAZI,CADX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBA;;;AACA,SAASE,iBAAT,CAA2B1B,IAA3B,EAAiC;AAC7BE,EAAAA,WAAW,GAAG,CAAd;;AACA,OAAK,IAAIyB,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAG3B,IAAI,CAAC4B,MAAzB,EAAiCD,EAAC,EAAlC,EAAsC;AAClC,QAAIE,GAAG,GAAG5B,YAAY,CAAC4B,GAAb,CAAiBF,EAAjB,CAAV;AACAzB,IAAAA,WAAW,IAAI4B,MAAM,CAAC9B,IAAI,CAAC6B,GAAD,CAAL,CAArB;AACH;;AACD,SAAO3B,WAAP;AACH;AAED;;;AACA,SAAS6B,SAAT,GAAqB;AACjB;AACA;AACA,MAAIvB,SAAS,GAAGwB,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAhB;AACA,MAAIxB,QAAQ,GAAGuB,QAAQ,CAACC,cAAT,CAAwB,UAAxB,CAAf;AACA,MAAIvB,OAAO,GAAGsB,QAAQ,CAACC,cAAT,CAAwB,SAAxB,CAAd;AACA,MAAItB,IAAI,GAAGqB,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAAX;AACA,MAAIrB,KAAK,GAAGoB,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAZ,CAPiB,CASjB;;AACA,MAAIC,QAAQ,GAAG,iBAAf;AACA,MAAIC,UAAU,GAAG,wBAAjB;AACA,MAAIC,QAAQ,GAAG,0DAAf;AAEA,MAAIC,YAAY,GAAG,CAAC7B,SAAD,EAAYC,QAAZ,EAAsBC,OAAtB,EAA+BC,IAA/B,EAAqCC,KAArC,CAAnB;AACA,MAAI0B,YAAY,GAAG,CAACJ,QAAD,EAAWA,QAAX,EAAqBC,UAArB,EAAiCD,QAAjC,EAA2CE,QAA3C,CAAnB,CAfiB,CAiBjB;AAEA;;AACA,OAAKT,CAAC,GAAC,CAAP,EAAUA,CAAC,GAAGU,YAAY,CAACT,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;AACpC,QAAIY,GAAG,GAAGF,YAAY,CAACV,CAAD,CAAtB;AACA,QAAIa,GAAG,GAAGF,YAAY,CAACX,CAAD,CAAtB,CAFoC,CAGpC;;AACA,QAAIc,IAAI,GAAGD,GAAG,CAACC,IAAJ,CAASF,GAAG,CAAC1B,KAAb,CAAX;AACA,QAAI6B,KAAK,GAAG,EAAZ,CALoC,CAOpC;;AACA,QAAID,IAAI,IAAI,KAAZ,EAAmB;AACf,UAAIE,UAAU,GAAG,KAAjB;;AACA,cAAOJ,GAAG,CAACK,IAAX;AACI,aAAK,WAAL;AACIZ,UAAAA,QAAQ,CAACC,cAAT,CAAwBM,GAAG,CAACK,IAAJ,GAAW,UAAnC,EAA+CC,WAA/C,GAA6D,qFAA7D;AACA;;AACJ,aAAK,UAAL;AACIb,UAAAA,QAAQ,CAACC,cAAT,CAAwBM,GAAG,CAACK,IAAJ,GAAW,UAAnC,EAA+CC,WAA/C,GAA6D,qFAA7D;AACA;;AACJ,aAAK,SAAL;AACIb,UAAAA,QAAQ,CAACC,cAAT,CAAwBM,GAAG,CAACK,IAAJ,GAAW,UAAnC,EAA+CC,WAA/C,GAA6D,6HAA7D;AACA;;AACJ,aAAK,MAAL;AACIb,UAAAA,QAAQ,CAACC,cAAT,CAAwBM,GAAG,CAACK,IAAJ,GAAW,UAAnC,EAA+CC,WAA/C,GAA6D,sFAA7D;AACA;;AACJ,aAAK,OAAL;AACIb,UAAAA,QAAQ,CAACC,cAAT,CAAwBM,GAAG,CAACK,IAAJ,GAAW,UAAnC,EAA+CC,WAA/C,GAA6D,mFAA7D;AACA;AAfR;AAiBH;AACJ;;AACD,SAAOF,UAAP;AACH;AAED;;;AACA,SAAeG,WAAf,CAA2B9C,IAA3B;AAAA;;AAAA;AAAA;AAAA;AAAA;AACQ+C,UAAAA,aADR,GACwB,EADxB;AAEYpB,UAAAA,GAFZ,GAEgB,CAFhB;;AAAA;AAAA,gBAEmBA,GAAC,GAAG3B,IAAI,CAAC4B,MAF5B;AAAA;AAAA;AAAA;;AAGYoB,UAAAA,OAHZ,GAGsB/C,YAAY,CAAC4B,GAAb,CAAiBF,GAAjB,CAHtB;AAIYsB,UAAAA,QAJZ,GAIuBD,OAAO,CAACE,KAAR,CAAc,GAAd,CAJvB;AAKQ9C,UAAAA,SAAS,GAAG6C,QAAQ,CAAC,CAAD,CAApB;;AALR,eAMYF,aAAa,CAACI,QAAd,CAAuB/C,SAAvB,CANZ;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAUY2C,UAAAA,aAAa,CAACpB,GAAD,CAAb,GAAmBvB,SAAnB;;AAVZ;AAEoCuB,UAAAA,GAAC,EAFrC;AAAA;AAAA;;AAAA;AAAA,4CAaWoB,aAbX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBA;;;AACA,SAAeK,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AACIC,UAAAA,OAAO,GAAG,IAAI9C,OAAJ,CAAYC,SAAZ,EAAuBC,QAAvB,EAAiCC,OAAjC,EAA0CC,IAA1C,EAAgDC,KAAhD,CAAV;AADJ;AAAA,0CAE2BkC,WAAW,CAAC9C,IAAD,CAFtC;;AAAA;AAEUqB,UAAAA,QAFV;AAGIiC,UAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BlC,QAA1B;AACImC,UAAAA,SAJR,GAIoB;AACZH,YAAAA,OAAO,EAAPA,OADY;AAEZhC,YAAAA,QAAQ,EAARA;AAFY,WAJpB;AAQIiC,UAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCC,SAAnC;AARJ,4CASWA,SATX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;;;AACA,SAAeC,SAAf,CAAyBC,IAAzB;AAAA;AAAA;AAAA;AAAA;AACIzC,UAAAA,KAAK,CAAC,0CAAD,EAA6C;AAC9C0C,YAAAA,MAAM,EAAE,MADsC;AAE9CC,YAAAA,QAAQ,EAAE,QAFoC;AAG9CC,YAAAA,OAAO,EAAE;AAAC,8BAAgB;AAAjB,aAHqC;AAI9CC,YAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeN,IAAf;AAJwC,WAA7C,CAAL,CAMCxC,IAND,CAMM,UAAS+C,QAAT,EAAmB;AACrB,mBAAOA,QAAQ,CAAC7C,IAAT,EAAP;AACH,WARD,EASCF,IATD,CASM,UAASE,IAAT,EAAc;AAChBpB,YAAAA,IAAI,CAACkE,KAAL;AACAZ,YAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCnC,IAAI,CAAC+C,OAArC;AACA,mBAAOC,MAAM,CAACC,QAAP,GAAkB,+BAA+BjD,IAAI,CAAC+C,OAA7D;AACH,WAbD,WAcO,UAASG,GAAT,EAAc;AACjB,mBAAOhB,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBe,GAAxB,CAAP;AACH,WAhBD;;AADJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoBA;;;AACA,SAAeC,UAAf,CAA0BjD,OAA1B,EAAmCpB,WAAnC,EAAgDC,UAAhD,EAA4DG,eAA5D,EAA6E0C,OAA7E;AAAA;AAAA;AAAA;AAAA;AAAA;AACI;;AACA;AACIwB,UAAAA,QAHR,GAGmBxC,QAAQ,CAACyC,aAAT,CAAuB,SAAvB,CAHnB;AAIQC,UAAAA,WAJR,GAIsB1C,QAAQ,CAACyC,aAAT,CAAuB,KAAvB,CAJtB;AAKQE,UAAAA,UALR,GAKqB3C,QAAQ,CAACyC,aAAT,CAAuB,KAAvB,CALrB;AAOQG,UAAAA,eAPR,GAO0B5C,QAAQ,CAACyC,aAAT,CAAuB,KAAvB,CAP1B;AAQQI,UAAAA,oBARR,GAQ+B7C,QAAQ,CAACyC,aAAT,CAAuB,KAAvB,CAR/B;AASQK,UAAAA,oBATR,GAS+B9C,QAAQ,CAACyC,aAAT,CAAuB,IAAvB,CAT/B;AAUQM,UAAAA,oBAVR,GAU+B/C,QAAQ,CAACyC,aAAT,CAAuB,GAAvB,CAV/B;AAWQO,UAAAA,oBAXR,GAW+BhD,QAAQ,CAACyC,aAAT,CAAuB,GAAvB,CAX/B;AAcQQ,UAAAA,gBAdR,GAc2BjD,QAAQ,CAACyC,aAAT,CAAuB,KAAvB,CAd3B;AAgBQS,UAAAA,gBAhBR,GAgB2BlD,QAAQ,CAACyC,aAAT,CAAuB,KAAvB,CAhB3B;AAiBQU,UAAAA,oBAjBR,GAiB+BnD,QAAQ,CAACyC,aAAT,CAAuB,GAAvB,CAjB/B;AAkBQW,UAAAA,qBAlBR,GAkBgCpD,QAAQ,CAACyC,aAAT,CAAuB,OAAvB,CAlBhC;AAoBQY,UAAAA,eApBR,GAoB0BrD,QAAQ,CAACyC,aAAT,CAAuB,KAAvB,CApB1B;AAqBQa,UAAAA,UArBR,GAqBqBtD,QAAQ,CAACyC,aAAT,CAAuB,GAAvB,CArBrB;AAwBI;;AACAzC,UAAAA,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCsD,WAAvC,CAAmDf,QAAnD;AACAA,UAAAA,QAAQ,CAACe,WAAT,CAAqBb,WAArB;AACAA,UAAAA,WAAW,CAACa,WAAZ,CAAwBZ,UAAxB;AAEAH,UAAAA,QAAQ,CAACe,WAAT,CAAqBX,eAArB;AACAA,UAAAA,eAAe,CAACW,WAAhB,CAA4BV,oBAA5B;AACAA,UAAAA,oBAAoB,CAACU,WAArB,CAAiCT,oBAAjC;AACAD,UAAAA,oBAAoB,CAACU,WAArB,CAAiCR,oBAAjC;AACAF,UAAAA,oBAAoB,CAACU,WAArB,CAAiCP,oBAAjC;AAEAJ,UAAAA,eAAe,CAACW,WAAhB,CAA4BN,gBAA5B;AAEAA,UAAAA,gBAAgB,CAACM,WAAjB,CAA6BL,gBAA7B;AACAA,UAAAA,gBAAgB,CAACK,WAAjB,CAA6BJ,oBAA7B;AACAD,UAAAA,gBAAgB,CAACK,WAAjB,CAA6BH,qBAA7B;AAEAH,UAAAA,gBAAgB,CAACM,WAAjB,CAA6BF,eAA7B;AACAA,UAAAA,eAAe,CAACE,WAAhB,CAA4BD,UAA5B;AAGA;;AACAd,UAAAA,QAAQ,CAACgB,YAAT,CAAsB,OAAtB,EAA+B,YAA/B;AACAhB,UAAAA,QAAQ,CAACgB,YAAT,CAAsB,SAAtB,EAAiCpF,SAAjC;AACAoE,UAAAA,QAAQ,CAACgB,YAAT,CAAsB,YAAtB,EAAoCnF,YAApC;AAEAqE,UAAAA,WAAW,CAACc,YAAZ,CAAyB,OAAzB,EAAkC,iBAAlC;AAEAb,UAAAA,UAAU,CAACa,YAAX,CAAwB,KAAxB,EAA+BlE,OAAO,CAACmE,QAAvC;AACAd,UAAAA,UAAU,CAACa,YAAX,CAAwB,KAAxB,EAA+BlE,OAAO,CAACoE,MAAvC;AAGAd,UAAAA,eAAe,CAACY,YAAhB,CAA6B,OAA7B,EAAsC,qBAAtC;AACAX,UAAAA,oBAAoB,CAACW,YAArB,CAAkC,OAAlC,EAA2C,kCAA3C;AACAV,UAAAA,oBAAoB,CAACjC,WAArB,GAAmCvB,OAAO,CAACsB,IAA3C;AACAmC,UAAAA,oBAAoB,CAAClC,WAArB,GAAmCxC,YAAnC;AACA2E,UAAAA,oBAAoB,CAACnC,WAArB,GAAmCf,MAAM,CAACR,OAAO,CAACqE,KAAT,CAAN,GAAwB,IAA3D;AAEAV,UAAAA,gBAAgB,CAACO,YAAjB,CAA8B,OAA9B,EAAuC,+BAAvC;AAEAN,UAAAA,gBAAgB,CAACM,YAAjB,CAA8B,OAA9B,EAAuC,yCAAvC;AACAL,UAAAA,oBAAoB,CAACtC,WAArB,GAAmC,WAAWvC,eAA9C;AACA8E,UAAAA,qBAAqB,CAACI,YAAtB,CAAmC,MAAnC,EAA2C,QAA3C;AACAJ,UAAAA,qBAAqB,CAACI,YAAtB,CAAmC,OAAnC,EAA4C,cAA5C;AACAJ,UAAAA,qBAAqB,CAACI,YAAtB,CAAmC,MAAnC,EAA2C,cAA3C;AACAJ,UAAAA,qBAAqB,CAACI,YAAtB,CAAmC,KAAnC,EAA0C,GAA1C;AACAJ,UAAAA,qBAAqB,CAACI,YAAtB,CAAmC,KAAnC,EAA0C,KAA1C;AACAJ,UAAAA,qBAAqB,CAACI,YAAtB,CAAmC,OAAnC,EAA4ClF,eAA5C;AAEA+E,UAAAA,eAAe,CAACG,YAAhB,CAA6B,OAA7B,EAAsC,uCAAtC;AACAF,UAAAA,UAAU,CAACE,YAAX,CAAwB,OAAxB,EAAiC,YAAjC;AACAF,UAAAA,UAAU,CAACzC,WAAX,GAAyB,WAAzB;AAEA;;AACAb,UAAAA,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCY,WAAzC,GAAuD3C,WAAvD;AACA8B,UAAAA,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCY,WAAtC,GAAoD1C,UAApD;AAEA;;AAEA;;AACAiF,UAAAA,qBAAqB,CAACQ,gBAAtB,CAAuC,QAAvC,EAAiD,UAASC,CAAT,EAAY;AACzD;AACA3F,YAAAA,WAAW,GAAGwB,iBAAiB,CAAC1B,IAAD,CAA/B,CAFyD,CAGzD;;AACAI,YAAAA,SAAS,GAAGyF,CAAC,CAACC,MAAF,CAASC,OAAT,CAAiB,aAAjB,EAAgCC,YAAhC,CAA6C,SAA7C,CAAZ;AACA3F,YAAAA,YAAY,GAAGwF,CAAC,CAACC,MAAF,CAASC,OAAT,CAAiB,aAAjB,EAAgCC,YAAhC,CAA6C,YAA7C,CAAf;AACAhD,YAAAA,OAAO,GAAG5C,SAAS,GAAG,GAAZ,GAAkBC,YAA5B,CANyD,CAOzD;;AACA,gBAAI4F,eAAe,GAAInE,MAAM,CAAC9B,IAAI,CAACgD,OAAD,CAAL,CAA7B,CARyD,CASzD;;AACA7C,YAAAA,UAAU,IAAI8F,eAAe,GAAGnE,MAAM,CAACR,OAAO,CAACqE,KAAT,CAAtC,CAVyD,CAWzD;;AACA,gBAAI7D,MAAM,CAACoE,SAAP,CAAiBC,QAAQ,CAACN,CAAC,CAACC,MAAF,CAASjF,KAAV,CAAzB,KAA8CgF,CAAC,CAACC,MAAF,CAASjF,KAAT,GAAiB,CAAnE,EAAsE;AAClEP,cAAAA,eAAe,GAAGuF,CAAC,CAACC,MAAF,CAASjF,KAA3B;AACAuD,cAAAA,MAAM,CAACC,QAAP,CAAgB+B,MAAhB;AACH,aAHD,MAIK;AACD3E,cAAAA,KAAK,CAAC,iHAAD,CAAL;AACA,kBAAI4E,WAAW,GAAGrE,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAlB;AACAoE,cAAAA,WAAW,CAACb,YAAZ,CAAyB,UAAzB,EAAqC,MAArC;AACH;;AACDrF,YAAAA,UAAU,IAAIG,eAAe,GAAGwB,MAAM,CAACR,OAAO,CAACqE,KAAT,CAAtC,CArByD,CAsBzD;;AACA3F,YAAAA,IAAI,CAACgD,OAAD,CAAJ,GAAgB1C,eAAhB,CAvByD,CAwBzD;;AACAJ,YAAAA,WAAW,GAAGwB,iBAAiB,CAAC1B,IAAD,CAA/B,CAzByD,CA0BzD;;AACAgC,YAAAA,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCY,WAAzC,GAAuD3C,WAAvD;AACA8B,YAAAA,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCY,WAAtC,GAAoD1C,UAApD;AAEH,WA9BD;AAgCA;;AACAmF,UAAAA,UAAU,CAACM,gBAAX,CAA4B,OAA5B,EAAqC,UAASC,CAAT,EAAY;AAC7C3F,YAAAA,WAAW,IAAI4B,MAAM,CAACxB,eAAD,CAArB;AACAH,YAAAA,UAAU,IAAI2B,MAAM,CAACxB,eAAD,CAAN,GAA0BwB,MAAM,CAACR,OAAO,CAACqE,KAAT,CAA9C;AACA3F,YAAAA,IAAI,CAACsG,UAAL,CAAgBtD,OAAhB;AACAoB,YAAAA,MAAM,CAACC,QAAP,CAAgB+B,MAAhB;AACApE,YAAAA,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCY,WAAzC,GAAuD3C,WAAvD;AACA8B,YAAAA,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCY,WAAtC,GAAoD1C,UAApD;AACAF,YAAAA,YAAY,CAACqG,UAAb,CAAwBtD,OAAxB;AACH,WARD;;AArHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkIA;;;AACA,CAAC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,gBAEOhD,IAAI,CAAC4B,MAAL,IAAe,CAFtB;AAAA;AAAA;AAAA;;AAGO;AACAH,UAAAA,KAAK,CAAC,gEAAD,CAAL;AACAO,UAAAA,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCuD,YAAjC,CAA8C,SAA9C,EAAyD,MAAzD;AALP;AAAA;;AAAA;AAUe7D,UAAAA,GAVf,GAUmB,CAVnB;;AAAA;AAAA,gBAUsBA,GAAC,GAAG3B,IAAI,CAAC4B,MAV/B;AAAA;AAAA;AAAA;;AAWW;AACIoB,UAAAA,OAZf,GAYyB/C,YAAY,CAAC4B,GAAb,CAAiBF,GAAjB,CAZzB;AAaesB,UAAAA,QAbf,GAa0BD,OAAO,CAACE,KAAR,CAAc,GAAd,CAb1B;AAcW9C,UAAAA,SAAS,GAAG6C,QAAQ,CAAC,CAAD,CAApB;AACA5C,UAAAA,YAAY,GAAG4C,QAAQ,CAAC,CAAD,CAAvB;AACA3C,UAAAA,eAAe,GAAGN,IAAI,CAACuG,OAAL,CAAavD,OAAb,CAAlB,CAhBX,CAkBW;;AACA9C,UAAAA,WAAW,IAAI4B,MAAM,CAACxB,eAAD,CAArB,CAnBX,CAqBW;;AArBX;AAAA,0CAsB+BS,UAAU,CAACX,SAAD,CAtBzC;;AAAA;AAsBekB,UAAAA,OAtBf;AAuBWnB,UAAAA,UAAU,IAAI2B,MAAM,CAACxB,eAAD,CAAN,GAA0BwB,MAAM,CAACR,OAAO,CAACqE,KAAT,CAA9C,CAvBX,CAyBW;;AAzBX;AAAA,0CA0BqCpB,UAAU,CAACjD,OAAD,EAAUpB,WAAV,EAAuBC,UAAvB,EAAmCG,eAAnC,EAAoD0C,OAApD,CA1B/C;;AAAA;AA0BiBwD,UAAAA,WA1BjB;;AAAA;AAUuC7E,UAAAA,GAAC,EAVxC;AAAA;AAAA;;AAAA;AAAA,gBA8BW3B,IAAI,CAAC4B,MAAL,IAAe,CA9B1B;AAAA;AAAA;AAAA;;AA+BWH,UAAAA,KAAK,CAAC,iGAAD,CAAL;AA/BX,4CAgCkB2C,MAAM,CAACC,QAAP,GAAkB,YAhCpC;;AAAA;AAqCO;;AACA;AACMoC,UAAAA,QAvCb,GAuCwBzE,QAAQ,CAACC,cAAT,CAAwB,mBAAxB,CAvCxB;AAwCOwE,UAAAA,QAAQ,CAACb,gBAAT,CAA0B,QAA1B,EAAoC,iBAAgBC,CAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAChCA,oBAAAA,CAAC,CAACa,cAAF,GADgC,CAEhC;;AACIC,oBAAAA,KAH4B,GAGpB5E,SAAS,CAAC8D,CAAD,CAHW;;AAAA,0BAI5Bc,KAAK,IAAI,KAJmB;AAAA;AAAA;AAAA;;AAAA,sDAKrB,KALqB;;AAAA;AAAA;AAAA,oDAOfvD,UAAU,EAPK;;AAAA;AAO5BM,oBAAAA,IAP4B;AAAA;AAAA,oDAQdD,SAAS,CAACC,IAAD,CARK;;AAAA;AAQ5BkD,oBAAAA,KAR4B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAApC;;AAxCP;AAAA,4CAmDUtD,OAAO,CAACC,GAAR,CAAY,WAAZ,CAnDV;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAD","sourcesContent":["/* ***** VARIABLES ***** */\r\nvar cart = localStorage;\r\n\r\nvar cartCounter = 0;\r\nvar totalPrice = 0;\r\n\r\nvar productId, productColor, productQuantity;\r\n\r\n\r\n/* ***** CLASSES ***** */\r\n\r\nclass Contact {\r\n    constructor (firstName, lastName, address, city, email) {\r\n        this.firstName = firstName.value;\r\n        this.lastName = lastName.value;\r\n        this.address = address.value;\r\n        this.city = city.value;\r\n        this.email = email.value;\r\n    }\r\n}\r\n\r\n\r\n\r\n/* ***** FONCTIONS ***** */\r\n\r\n/* *** GÉNÉRAL *** */\r\n\r\n/* RÉCUPÉRATION DES PRODUITS DANS LE LOCAL STORAGE */\r\nasync function getProducts(cart) {}\r\n\r\n/* RÉCUPÉRATION DE CHAQUE PRODUIT SUR SERVEUR */\r\nasync function getProduct(id) {\r\n    return fetch(\"http://localhost:3000/api/products\")\r\n      .then(function(httpBodyResponse) {\r\n        return httpBodyResponse.json();\r\n      })\r\n      .then(function(products) {\r\n          for (product of products) { \r\n              if (product._id == id) {  \r\n                return product;}\r\n          }\r\n      })\r\n      .catch(function(error) {\r\n          return alert(\"Désolé, il y a eu une erreur: \", error);\r\n      });\r\n}\r\n\r\n/* UPDATE COMPTEUR D'ARTICLES */\r\nfunction updateCartCounter(cart) {\r\n    cartCounter = 0;\r\n    for (let i = 0; i < cart.length; i++) {\r\n        let key = localStorage.key(i);\r\n        cartCounter += Number(cart[key]);\r\n    }\r\n    return cartCounter\r\n}\r\n\r\n/* VÉRIFICATION FORMULAIRE */\r\nfunction checkForm() {\r\n    /* Variables utiles */\r\n    // Éléments d'input à check:\r\n    let firstName = document.getElementById(\"firstName\");\r\n    let lastName = document.getElementById(\"lastName\");\r\n    let address = document.getElementById(\"address\");\r\n    let city = document.getElementById(\"city\");\r\n    let email = document.getElementById(\"email\");\r\n\r\n    // Regexs pour check:\r\n    let regNames = /^[a-zA-Z\\s'-]+$/;\r\n    let regAddress = /\\d+\\,{0,1}\\s+\\w+\\s+\\w+/;\r\n    let regEmail = /^[A-Za-z0-9._%+-]+@([A-Za-z0-9-]+\\.)+([A-Za-z0-9]{2,4})$/;\r\n\r\n    let inputsToTest = [firstName, lastName, address, city, email];\r\n    let regexsToTest = [regNames, regNames, regAddress, regNames, regEmail];\r\n\r\n    // Variable à renvoyer en fin de fonction (true si aucune erreur, false si au moins une erreur):\r\n\r\n    // Boucle de test:\r\n    for (i=0; i < inputsToTest.length; i++) {\r\n        let inp = inputsToTest[i];\r\n        let reg = regexsToTest[i];\r\n        // Valeur du test pour l'input en cours:\r\n        let test = reg.test(inp.value);\r\n        var tests = [];\r\n        \r\n        // Si false sur ce test, message d'erreur sous le champ correspondant:\r\n        if (test == false) {\r\n            var globalTest = false;\r\n            switch(inp.name) {\r\n                case \"firstName\": \r\n                    document.getElementById(inp.name + \"ErrorMsg\").textContent = \"Ce champ peut contenir des lettres majuscules et minuscules, apostrophes et tirets.\";\r\n                    break;\r\n                case \"lastName\": \r\n                    document.getElementById(inp.name + \"ErrorMsg\").textContent = \"Ce champ peut contenir des lettres majuscules et minuscules, apostrophes et tirets.\";\r\n                    break;\r\n                case \"address\": \r\n                    document.getElementById(inp.name + \"ErrorMsg\").textContent = \"Ce champ doit commencer par un ou plusieurs chiffres éventuellement suivis d'une virgule, puis obligatoirement des lettres.\";\r\n                    break;\r\n                case \"city\":\r\n                    document.getElementById(inp.name + \"ErrorMsg\").textContent = \"Ce champ doit contenir des lettres, et éventuellement une apostrophe et/ou un tiret.\";\r\n                    break;\r\n                case \"email\":\r\n                    document.getElementById(inp.name + \"ErrorMsg\").textContent = \"Ce champ doit contenir une adresse mail valide, par exemple: Kim.robert@kanap.com\";\r\n                    break;\r\n            }\r\n        }\r\n    } \r\n    return globalTest;\r\n}\r\n\r\n/* GÉNÉRATION TABLEAU PRODUITS */\r\nasync function createTable(cart) {\r\n    let productsTable = [];\r\n    for(let i = 0; i < cart.length; i++) {\r\n        let cartKey = localStorage.key(i);\r\n        let splitKey = cartKey.split(\" \");\r\n        productId = splitKey[0];\r\n        if (productsTable.includes(productId)) {\r\n            continue;\r\n        }\r\n        else {\r\n            productsTable[i] = productId;\r\n        }\r\n    }\r\n    return productsTable;\r\n}\r\n\r\n/* GÉNÉRATION DONNÉES ENVOI */\r\nasync function createData() {\r\n    contact = new Contact(firstName, lastName, address, city, email);\r\n    const products = await createTable(cart);\r\n    console.log(\"produits: \", products);\r\n    var orderData = {\r\n        contact,\r\n        products\r\n    };\r\n    console.log(\"Données à envoyer: \", orderData);\r\n    return orderData\r\n}\r\n\r\n\r\n/* ENVOI COMMANDE */\r\nasync function postOrder(data) {\r\n    fetch(\"http://localhost:3000/api/products/order\", {\r\n        method: \"POST\",\r\n        redirect: \"manual\",\r\n        headers: {\"Content-type\": \"application/json\"},\r\n        body: JSON.stringify(data),\r\n    })\r\n    .then(function(response) {\r\n        return response.json();\r\n    })\r\n    .then(function(json){\r\n        cart.clear();\r\n        console.log(\"Id de commande: \", json.orderId);\r\n        return window.location = \"confirmation.html?orderId=\" + json.orderId;\r\n    })\r\n    .catch(function(err) {\r\n        return console.log(\"Erreur: \", err);\r\n    })\r\n}\r\n\r\n/* *** DOM DYNAMIQUE ***  */\r\nasync function hydrateDom(product, cartCounter, totalPrice, productQuantity, cartKey) {\r\n    /* AFFICHAGE PRODUITS */\r\n    /* Création balises */\r\n    let cartItem = document.createElement(\"article\");\r\n    let cartItemImg = document.createElement(\"div\");\r\n    let productImg = document.createElement(\"img\");\r\n\r\n    let cartItemContent = document.createElement(\"div\");\r\n    let cartItemContentDescr = document.createElement(\"div\");\r\n    let cartItemContentTitle = document.createElement(\"h2\");\r\n    let cartItemContentColor = document.createElement(\"p\");\r\n    let cartItemContentPrice = document.createElement(\"p\");\r\n\r\n\r\n    let cartItemSettings = document.createElement(\"div\");\r\n\r\n    let settingsQuantity = document.createElement(\"div\");\r\n    let settingsQuantityText = document.createElement(\"p\");\r\n    let settingsQuantityInput = document.createElement(\"input\");\r\n\r\n    let deleteContainer = document.createElement(\"div\");\r\n    let deleteText = document.createElement(\"p\");\r\n\r\n\r\n    /* Position balises */\r\n    document.getElementById(\"cart__items\").appendChild(cartItem);\r\n    cartItem.appendChild(cartItemImg);\r\n    cartItemImg.appendChild(productImg);\r\n\r\n    cartItem.appendChild(cartItemContent);\r\n    cartItemContent.appendChild(cartItemContentDescr);\r\n    cartItemContentDescr.appendChild(cartItemContentTitle);\r\n    cartItemContentDescr.appendChild(cartItemContentColor);\r\n    cartItemContentDescr.appendChild(cartItemContentPrice);\r\n\r\n    cartItemContent.appendChild(cartItemSettings);\r\n\r\n    cartItemSettings.appendChild(settingsQuantity);\r\n    settingsQuantity.appendChild(settingsQuantityText);\r\n    settingsQuantity.appendChild(settingsQuantityInput);\r\n\r\n    cartItemSettings.appendChild(deleteContainer);\r\n    deleteContainer.appendChild(deleteText);\r\n\r\n\r\n    /* Attributs et contenu (balises créées avec js) */\r\n    cartItem.setAttribute(\"class\", \"cart__item\");\r\n    cartItem.setAttribute(\"data-id\", productId);\r\n    cartItem.setAttribute(\"data-color\", productColor);\r\n\r\n    cartItemImg.setAttribute(\"class\", \"cart__item__img\")\r\n\r\n    productImg.setAttribute(\"src\", product.imageUrl);\r\n    productImg.setAttribute(\"alt\", product.altTxt);\r\n\r\n\r\n    cartItemContent.setAttribute(\"class\", \"cart__item__content\");\r\n    cartItemContentDescr.setAttribute(\"class\", \"cart__item__content__description\")\r\n    cartItemContentTitle.textContent = product.name;\r\n    cartItemContentColor.textContent = productColor;\r\n    cartItemContentPrice.textContent = Number(product.price) + \" €\";\r\n\r\n    cartItemSettings.setAttribute(\"class\", \"cart__item__content__settings\");\r\n    \r\n    settingsQuantity.setAttribute(\"class\", \"cart__item__content__settings__quantity\");\r\n    settingsQuantityText.textContent = \"Qté : \" + productQuantity;\r\n    settingsQuantityInput.setAttribute(\"type\", \"number\");\r\n    settingsQuantityInput.setAttribute(\"class\", \"itemQuantity\");\r\n    settingsQuantityInput.setAttribute(\"name\", \"itemQuantity\");\r\n    settingsQuantityInput.setAttribute(\"min\", \"1\");\r\n    settingsQuantityInput.setAttribute(\"max\", \"100\");\r\n    settingsQuantityInput.setAttribute(\"value\", productQuantity);\r\n\r\n    deleteContainer.setAttribute(\"class\", \"cart__item__content__settings__delete\");\r\n    deleteText.setAttribute(\"class\", \"deleteItem\");\r\n    deleteText.textContent = \"Supprimer\";\r\n\r\n    /* Attributs et contenus (balises existantes dans le html) */\r\n    document.getElementById(\"totalQuantity\").textContent = cartCounter;\r\n    document.getElementById(\"totalPrice\").textContent = totalPrice;\r\n\r\n    /* MODIFICATIONS DYNAMIQUES PANIER */\r\n\r\n    /* Modification quantité: */\r\n    settingsQuantityInput.addEventListener(\"change\", function(e) {\r\n        //Comptage items depuis localStorage\r\n        cartCounter = updateCartCounter(cart);\r\n        //Récupération informations objet visé\r\n        productId = e.target.closest(\".cart__item\").getAttribute(\"data-id\");\r\n        productColor = e.target.closest(\".cart__item\").getAttribute(\"data-color\");\r\n        cartKey = productId + \" \" + productColor;\r\n        //Quantité objet avant modification de l'input\r\n        let initialQuantity =  Number(cart[cartKey]);\r\n        //Màj prix et quantité\r\n        totalPrice -= initialQuantity * Number(product.price);\r\n        //Vérification valeur input quantité produit:\r\n        if (Number.isInteger(parseInt(e.target.value)) && e.target.value > 0) {\r\n            productQuantity = e.target.value;\r\n            window.location.reload();\r\n        }\r\n        else {\r\n            alert(\"Veuillez entrer une quantité valide (entier positif) pour chaque article ou le supprimer via le bouton adéquat.\");\r\n            let orderButton = document.getElementById(\"order\");\r\n            orderButton.setAttribute(\"disabled\", \"true\");\r\n        }\r\n        totalPrice += productQuantity * Number(product.price);\r\n        //Màj quantité dans le localStorage\r\n        cart[cartKey] = productQuantity;\r\n        //Màj compteur via comptage localStorage\r\n        cartCounter = updateCartCounter(cart);\r\n        //Màj affichage\r\n        document.getElementById(\"totalQuantity\").textContent = cartCounter;\r\n        document.getElementById(\"totalPrice\").textContent = totalPrice;\r\n\r\n    });\r\n    \r\n    /* Suppression d'un produit: */\r\n    deleteText.addEventListener(\"click\", function(e) {\r\n        cartCounter -= Number(productQuantity);\r\n        totalPrice -= Number(productQuantity) * Number(product.price);\r\n        cart.removeItem(cartKey);\r\n        window.location.reload();\r\n        document.getElementById(\"totalQuantity\").textContent = cartCounter;\r\n        document.getElementById(\"totalPrice\").textContent = totalPrice;\r\n        localStorage.removeItem(cartKey);\r\n    });\r\n}\r\n\r\n\r\n\r\n/* ***** ACTIONS ***** */\r\n(async function() {\r\n    /* SI PANIER VIDE */ \r\n    if (cart.length == 0) {\r\n        // Désactivation du bouton de commande: \r\n        alert(\"Attention: votre panier est vide, vous ne pouvez pas commander\");\r\n        document.getElementById(\"order\").setAttribute(\"diabled\", \"true\");\r\n    }\r\n    /* SINON */\r\n    else {\r\n        // Affichage dynamique produit par produit:\r\n        for(let i = 0; i < cart.length; i++){\r\n            // (Récupération infos produits en local storage:)\r\n            var cartKey = localStorage.key(i);\r\n            var splitKey = cartKey.split(\" \");\r\n            productId = splitKey[0];\r\n            productColor = splitKey[1];\r\n            productQuantity = cart.getItem(cartKey);\r\n\r\n            // (Màj compteur d'items:)\r\n            cartCounter += Number(productQuantity);\r\n    \r\n            // (Infos serveur:)\r\n            var product = await getProduct(productId);\r\n            totalPrice += Number(productQuantity) * Number(product.price);\r\n    \r\n            // (Contenu dynamique page:)\r\n            const pageContent = await hydrateDom(product, cartCounter, totalPrice, productQuantity, cartKey);\r\n        }\r\n        \r\n        // Si panier vide:\r\n        if (cart.length == 0) {\r\n            alert(\"Impossible de passer commande, votre panier est vide! \\nVous allez être redirigé-e vers l'index\");\r\n            return window.location = \"index.html\";\r\n            let orderButton = document.getElementById(\"order\");\r\n            orderButton.setAttribute(\"disabled\", \"true\");\r\n        }\r\n\r\n        // Si panier non vide:\r\n        /* Vérification formulaire: */\r\n        const userForm = document.getElementById(\"cart__order__form\");\r\n        userForm.addEventListener(\"submit\", async function (e) {\r\n            e.preventDefault();\r\n            // Si panier plein:\r\n            let check = checkForm(e);\r\n            if (check == false) {\r\n                return false;\r\n            }\r\n            let data = await createData();\r\n            let order = await postOrder(data);\r\n        });\r\n    }\r\n    return console.log(\"fin input\");\r\n})()\r\n\r\n\r\n        \r\n\r\n\r\n"],"file":"cart.dev.js"}