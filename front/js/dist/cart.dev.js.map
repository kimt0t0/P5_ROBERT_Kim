{"version":3,"sources":["cart.js"],"names":["cart","localStorage","split","productId","productColor","productQuantity","productPrice","productImgUrl","total","splitCartProduct","cartProduct","console","log","getProduct","id","fetch","then","httpBodyResponse","json","products","product","_id","error","alert","addLineToCart","cartItem","document","createElement","cartItemImg","productImg","cartItemContent","cartItemContentDescr","cartItemContentTitle","cartItemContentColor","cartItemContentPrice","cartItemSettings","settingsQuantity","settingsQuantityText","settingsQuantityInput","deleteContainer","deleteText","setAttribute","imageUrl","altTxt","textContent","name","price","getElementById","appendChild","changeQuantity","deleteProduct","i","length","cartKey","key","splitKey","Number","getItem","newLine"],"mappings":"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","sourcesContent":["/* *** VARIABLES *** */\r\nvar cart = localStorage;\r\nvar split, productId, productColor, productQuantity, productPrice, productImgUrl, total;\r\n\r\n\r\n\r\n/* *** FONCTIONS *** */\r\n\r\n/* GÉNÉRAL */\r\n/* Récupération id et couleur du produit */\r\nasync function splitCartProduct(cartProduct) {\r\n    split = cartProduct.split(\" \");\r\n    console.log(split);\r\n    return split;\r\n}\r\n\r\n/* Accès aux infos produit sur serveur */\r\nasync function getProduct(id) {\r\n    return fetch(\"http://localhost:3000/api/products\")\r\n      .then(function(httpBodyResponse) {\r\n        return httpBodyResponse.json();\r\n      })\r\n      .then(function(products) {\r\n          for (product of products) { \r\n              if (product._id == id) {  \r\n                return product;}\r\n          }\r\n      })\r\n      .catch(function(error) {\r\n          alert(error);\r\n      });\r\n}\r\n\r\n/* LIGNE PANIER */\r\nasync function addLineToCart(product) {\r\n    /* Création balises */\r\n    let cartItem = document.createElement(\"article\");\r\n    let cartItemImg = document.createElement(\"div\");\r\n    let productImg = document.createElement(\"img\");\r\n\r\n    let cartItemContent = document.createElement(\"div\");\r\n    let cartItemContentDescr = document.createElement(\"div\");\r\n    let cartItemContentTitle = document.createElement(\"h2\");\r\n    let cartItemContentColor = document.createElement(\"p\");\r\n    let cartItemContentPrice = document.createElement(\"p\");\r\n\r\n\r\n    let cartItemSettings = document.createElement(\"div\");\r\n\r\n    let settingsQuantity = document.createElement(\"div\");\r\n    let settingsQuantityText = document.createElement(\"p\");\r\n    let settingsQuantityInput = document.createElement(\"input\");\r\n\r\n    let deleteContainer = document.createElement(\"div\");\r\n    let deleteText = document.createElement(\"p\");\r\n\r\n    /* Attributs et contenu des balises */\r\n    cartItem.setAttribute(\"class\", \"cart__item\");\r\n    cartItem.setAttribute(\"data-id\", productId);\r\n    cartItem.setAttribute(\"data-color\", productColor);\r\n\r\n    cartItemImg.setAttribute(\"class\", \"cart__item__img\")\r\n\r\n    productImg.setAttribute(\"src\", product.imageUrl);\r\n    productImg.setAttribute(\"alt\", product.altTxt);\r\n\r\n\r\n    cartItemContent.setAttribute(\"class\", \"cart__item__content\");\r\n    cartItemContentDescr.setAttribute(\"class\", \"cart__item__content__description\")\r\n    cartItemContentTitle.textContent = product.name;\r\n    cartItemContentColor.textContent = productColor;\r\n    cartItemContentPrice.textContent = product.price + \" €\";\r\n\r\n    cartItemSettings.setAttribute(\"class\", \"cart__item__content__settings\");\r\n    \r\n    settingsQuantity.setAttribute(\"class\", \"cart__item__content__settings__quantity\");\r\n    settingsQuantityText.textContent = \"Qté : \" + productQuantity;\r\n    settingsQuantityInput.setAttribute(\"type\", \"number\");\r\n    settingsQuantityInput.setAttribute(\"class\", \"itemQuantity\");\r\n    settingsQuantityInput.setAttribute(\"name\", \"itemQuantity\");\r\n    settingsQuantityInput.setAttribute(\"min\", \"1\");\r\n    settingsQuantityInput.setAttribute(\"max\", \"100\");\r\n    settingsQuantityInput.setAttribute(\"value\", productQuantity);\r\n\r\n    deleteContainer.setAttribute(\"class\", \"cart__item__content__settings__delete\");\r\n    deleteText.setAttribute(\"class\", \"deleteItem\");\r\n    deleteText.textContent = \"Supprimer\";\r\n\r\n\r\n    /* Position des balises */\r\n    document.getElementById(\"cart__items\").appendChild(cartItem);\r\n    cartItem.appendChild(cartItemImg);\r\n    cartItemImg.appendChild(productImg);\r\n\r\n    document.getElementById(\"cart__items\").appendChild(cartItemContent);\r\n    cartItemContent.appendChild(cartItemContentDescr);\r\n    cartItemContentDescr.appendChild(cartItemContentTitle);\r\n    cartItemContentDescr.appendChild(cartItemContentColor);\r\n    cartItemContentDescr.appendChild(cartItemContentPrice);\r\n\r\n\r\n    document.getElementById(\"cart__items\").appendChild(cartItemSettings);\r\n\r\n    cartItemSettings.appendChild(settingsQuantity);\r\n    settingsQuantity.appendChild(settingsQuantityText);\r\n    settingsQuantity.appendChild(settingsQuantityInput);\r\n\r\n    cartItemSettings.appendChild(deleteContainer);\r\n    deleteContainer.appendChild(deleteText);\r\n\r\n\r\n}\r\n\r\n/* MODIFICATIONS PANIER */\r\nfunction changeQuantity() {}\r\n\r\nfunction deleteProduct() {}\r\n\r\n\r\n\r\n/* *** ACTIONS *** */\r\n(async function() {\r\n    /* Pour chaque élément du panier... */\r\n    for(let i = 0; i < cart.length; i++){\r\n        /* Obtention infos localStorage */\r\n        let cartKey = localStorage.key(i);\r\n        var splitKey = cartKey.split(\" \");\r\n        productId = splitKey[0];\r\n        productColor = splitKey[1];\r\n        productQuantity = Number(cart.getItem(cartKey));\r\n\r\n        /* Obtention infos serveur */\r\n        var product = await getProduct(productId);\r\n\r\n        /* Fonction d'affichage de la ligne*/\r\n        var newLine = await addLineToCart(product);\r\n\r\n        /* Écoute des événements et update ligne */\r\n    }\r\n})()"],"file":"cart.dev.js"}