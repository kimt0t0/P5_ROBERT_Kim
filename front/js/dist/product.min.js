"use strict";var productColor,product,productId,cart=localStorage;function getProduct(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("http://localhost:3000/api/products").then(function(e){return e.json()}).then(function(e){productId=new URL(location.href).searchParams.get("id");var t=!0,r=!1,n=void 0;try{for(var a,c=e[Symbol.iterator]();!(t=(a=c.next()).done);t=!0)if((product=a.value)._id==productId)return product}catch(e){r=!0,n=e}finally{try{t||null==c.return||c.return()}finally{if(r)throw n}}}).catch(function(e){alert(e)}));case 1:case"end":return e.stop()}})}function hydrateProduct(t){var r,n,a,c,o,u,s,i,d;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:for(r=document.getElementById("item__img"),n=document.createElement("img"),r.appendChild(n),n.setAttribute("src",t.imageUrl),n.setAttribute("alt",t.altTxt),document.getElementById("title").textContent=t.name,document.getElementById("price").textContent=t.price,document.getElementById("description").textContent=t.description,a=document.getElementById("colors"),o=!(c=!0),u=void 0,e.prev=12,s=t.colors[Symbol.iterator]();!(c=(i=s.next()).done);c=!0)color=i.value,(d=document.createElement("option")).setAttribute("value",color),d.textContent=color,a.append(d);e.next=20;break;case 16:e.prev=16,e.t0=e.catch(12),o=!0,u=e.t0;case 20:e.prev=20,e.prev=21,c||null==s.return||s.return();case 23:if(e.prev=23,o)throw u;e.next=26;break;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}},null,null,[[12,16,20,28],[21,,23,27]])}function getProductId(t){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t._id);case 1:case"end":return e.stop()}})}function getProductColor(){var t,r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("colors"),r=t.selectedIndex,e.abrupt("return",t.options[r].value);case 2:case"end":return e.stop()}})}function getProductQuantity(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Number(document.getElementById("quantity").value));case 1:case"end":return e.stop()}})}function generateCartKey(t,r){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t+" "+r);case 1:case"end":return e.stop()}})}function addToCart(t,r){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:cart[t]?cart[t]+=Number(r):cart[t]=Number(r);case 1:case"end":return e.stop()}})}regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(getProduct());case 2:return product=e.sent,e.next=5,regeneratorRuntime.awrap(hydrateProduct(product));case 5:e.sent;case 6:case"end":return e.stop()}}),document.getElementById("addToCart").addEventListener("click",function(){var t,r,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(getProductId(product));case 2:return t=e.sent,e.next=5,regeneratorRuntime.awrap(getProductColor());case 5:return r=e.sent,e.next=8,regeneratorRuntime.awrap(getProductQuantity());case 8:return n=e.sent,e.next=11,regeneratorRuntime.awrap(generateCartKey(t,r));case 11:cartKey=e.sent,product.colors.includes(r)&&0<n?addToCart(cartKey,n):alert("Toutes nos excuses, le kanap n'a pas pu être ajouté au panier! \nVous avez probablement oublié de préciser une couleur ou une quantité :-)\n\nN'hésitez pas à contacter notre équipe en cas de problème.");case 13:case"end":return e.stop()}})});
//# sourceMappingURL=product.min.js.map
