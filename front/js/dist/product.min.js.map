{"version":3,"sources":["product.js"],"names":["getProduct","fetch","then","httpBodyResponse","json","products","hydrateProduct","product","location","href","searchParams","get","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","_id","productId","err","error","alert","productImgContainer","document","getElementById","productImg","createElement","appendChild","setAttribute","altTxt","textContent","name","price","description","scrollColors","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","colors","color","newColor","append","getColor","addEventListener","e","target","addToCart","panier","localStorage","getItem","quantity","setItem","regeneratorRuntime","async","_context","prev","awrap","sent","stop","_context2","getQuantity","console","log"],"mappings":"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","file":"product.min.js","sourcesContent":["/* Gestion du contenu de la partie produit */\r\n(async function() {\r\n    const product = await getProduct();\r\n    hydrateProduct(product);\r\n})()\r\n\r\nfunction getProduct() {\r\n    return fetch(\"http://localhost:3000/api/products\")\r\n      .then(function(httpBodyResponse) {\r\n        return httpBodyResponse.json();\r\n      })\r\n      /* récupération de l'ensemble des produits: */\r\n      .then(function(products) {\r\n        /* récupération id dans l'url: */\r\n        const productId =  new URL(location.href).searchParams.get(\"id\");\r\n          /* recherche du produit correspondant: */\r\n          for (product of products) { \r\n              if (product._id == productId) {  \r\n                return product;}\r\n          }\r\n      })\r\n      .catch(function(error) {\r\n          alert(error);\r\n      });\r\n  }\r\n\r\nfunction hydrateProduct(product) {\r\n    /* Affichage image */\r\n    const productImgContainer = document.getElementById(\"item__img\");\r\n    const productImg = document.createElement(\"img\");\r\n    productImgContainer.appendChild(productImg);\r\n    productImg.setAttribute(\"src\", product.imageUrl);\r\n    productImg.setAttribute(\"alt\", product.altTxt);\r\n\r\n    /* Affichage titre */\r\n    document.getElementById(\"title\").textContent = product.name;\r\n    /* Affichage prix */\r\n    document.getElementById(\"price\").textContent = product.price;\r\n    /* Affichage description */\r\n    document.getElementById(\"description\").textContent = product.description;\r\n\r\n    /*Menu couleurs */\r\n    const scrollColors = document.getElementById(\"colors\");\r\n    for (color of product.colors) {\r\n        const newColor = document.createElement(\"option\");\r\n        newColor.setAttribute(\"value\", color);\r\n        newColor.textContent = color;\r\n        scrollColors.append(newColor);\r\n    }\r\n}\r\n\r\n/* Gestion du panier */\r\n\r\n(async function() {\r\n\r\n    var quantity = await getQuantity();\r\n    var color = await getColor();\r\n    var panier = await addToCart(color, quantity);\r\n    console.log(panier);\r\n})()\r\n\r\nfunction getColor() {\r\n    document.getElementById(\"colors\").addEventListener(\"change\",function(e) {\r\n        return color = e.target.value;\r\n    });\r\n}\r\n\r\nfunction getQuantity() {\r\n    document.getElementById(\"quantity\").addEventListener(\"input\", function (e) {\r\n        return quantity = e.target.value;\r\n    });\r\n}\r\n\r\nfunction addToCart() {\r\n    document.getElementById(\"addToCart\").addEventListener(\"click\", function(e) {\r\n        var panier = localStorage;\r\n        if (panier.getItem(product._id) && panier.getItem(product._id)[color]) {\r\n            panier.product._id[quantity] += quantity;\r\n        }\r\n        else {panier.setItem(product._id, [quantity, color]);}\r\n    });\r\n}\r\n\r\n"]}