{"version":3,"sources":["product.js"],"names":["getProduct","fetch","then","httpBodyResponse","json","products","hydrateProduct","product","location","href","searchParams","get","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","_id","productId","err","error","alert","productImgContainer","document","getElementById","productImg","createElement","appendChild","setAttribute","altTxt","textContent","name","price","description","scrollColors","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","colors","color","newColor","append","regeneratorRuntime","async","_context","prev","awrap","sent","stop","panier","localStorage","console","log","setEventListener","e","quantity","setItem"],"mappings":"aACC,SAAAA,aAAA,OAAAC,MAAA,sCAAAC,KAAA,SAAAC,GAAA,OAAAA,EAAAC,SAAAF,KAAA,SAAAG,GAEGC,IAAAA,EAAeC,IAAAA,IAAfC,SAAAC,MAAAC,aAAAC,IAAA,MAFHC,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAAA,IAAA,IAAAC,EAAAC,EAAAZ,EAAAa,OAAAC,cAAAP,GAAAI,EAAAC,EAAAG,QAAAC,MAAAT,GAAA,EAAA,GAAAL,QAAAS,EAAAM,MAAAf,QAAAgB,KAAAC,EAAA,OAAAjB,QAAA,MAAAkB,GAAAZ,GAAA,EAAAC,EAAAW,EAAA,QAAA,IAAAb,GAAA,MAAAK,EAAA,QAAAA,EAAA,SAAA,QAAA,GAAAJ,EAAA,MAAAC,MAAA,MAAA,SAAAY,GAADC,MAAAD,KAQQ,SAAApB,eAAOH,GAET,IAAAyB,EAAAC,SAAAC,eAAA,aACMC,EAAS1B,SAAU2B,cAAA,OACvBJ,EAAAK,YAAAF,GACAA,EAAMP,aAAqBhB,MAAAA,EAAeE,UACxCqB,EAAAG,aAAA,MAAA3B,EAAA4B,QAHqBN,SAAAC,eAAA,SAAAM,YAAA7B,EAAA8B,KAyB3BR,SAASC,eAAe,SAASM,YAAc7B,EAAQ+B,MArBjDT,SAAAC,eAAgBzB,eAAhB+B,YAAA7B,EAAAgC,YACI,IAAAC,EAAIX,SAAeL,eAAW,UAR7BiB,GAAA,EAAAC,GAAA,EAAAC,OAAA5B,EAAA,IASC,IAAA,IAAA6B,EAAAC,EAAOtC,EAAPuC,OAAA5B,OAAAC,cAAAsB,GAAAG,EAAAC,EAAAzB,QAAAC,MAAAoB,GAAA,EAAA,CAAAM,MAAAH,EAAAtB,MAAgB,IAAA0B,EAAAnB,SAAAG,cAAA,UACrBgB,EAAAd,aAAA,QAAAa,OAPoBC,EAAAZ,YAAAW,MAAAP,EAAAS,OAAAD,IAHhB,MAAAvB,GAAAiB,GAAA,EAAAC,EAAAlB,EAAA,QAAA,IAAAgB,GAAA,MAAAI,EAAA,QAAAA,EAAA,SAAA,QAAA,GAAAH,EAAA,MAAAC,IARdO,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAhC,MAAA,KAAA,EAAA,OAAAgC,EAAAhC,KAAA,EAAA8B,mBAAAI,MADDtD,cACC,KAAA,EAAAM,eAAA8C,EAAAG,MAAA,KAAA,EAAA,IAAA,MAAA,OAAAH,EAAAI,UAW8B,IAAAC,OAAAC,aAAAC,QAAAC,IAAAH,QAAA5B,SAAAC,eAAA,aAAA+B,iBAAA,QAAA,SAAAC,GAAA,IAAAC,EAAAlC,SAAAC,eAAA,YAAAiB,EAAAlB,SAAAC,eAAA,UAAA+B,iBAAA,SAAA,SAAAC,MALpBL,OAcEO,QAAAzD,QAAgBgB,IAAA,CAAAwC,EAAAhB","file":"product.min.js","sourcesContent":["/* Gestion du contenu de la partie produit */\r\n(async function() {\r\n    const product = await getProduct();\r\n    hydrateProduct(product);\r\n})()\r\n\r\nfunction getProduct() {\r\n    return fetch(\"http://localhost:3000/api/products\")\r\n      .then(function(httpBodyResponse) {\r\n        return httpBodyResponse.json();\r\n      })\r\n      /* récupération de l'ensemble des produits: */\r\n      .then(function(products) {\r\n        /* récupération id dans l'url: */\r\n        const productId =  new URL(location.href).searchParams.get(\"id\");\r\n          /* recherche du produit correspondant: */\r\n          for (product of products) { \r\n              if (product._id == productId) {  \r\n                return product;}\r\n          }\r\n      })\r\n      .catch(function(error) {\r\n          alert(error);\r\n      });\r\n  }\r\n\r\nfunction hydrateProduct(product) {\r\n    /* Affichage image */\r\n    const productImgContainer = document.getElementById(\"item__img\");\r\n    const productImg = document.createElement(\"img\");\r\n    productImgContainer.appendChild(productImg);\r\n    productImg.setAttribute(\"src\", product.imageUrl);\r\n    productImg.setAttribute(\"alt\", product.altTxt);\r\n\r\n    /* Affichage titre */\r\n    document.getElementById(\"title\").textContent = product.name;\r\n    /* Affichage prix */\r\n    document.getElementById(\"price\").textContent = product.price;\r\n    /* Affichage description */\r\n    document.getElementById(\"description\").textContent = product.description;\r\n\r\n    /*Menu couleurs */\r\n    const scrollColors = document.getElementById(\"colors\");\r\n    for (color of product.colors) {\r\n        const newColor = document.createElement(\"option\");\r\n        newColor.setAttribute(\"value\", color);\r\n        newColor.textContent = color;\r\n        scrollColors.append(newColor);\r\n    }\r\n}\r\n\r\n/* Gestion du panier */\r\nvar panier = localStorage;\r\nconsole.log(panier);\r\n\r\ndocument\r\n    .getElementById(\"addToCart\")\r\n    .setEventListener(\"click\", function (e) {\r\n        var quantity = document.getElementById(\"quantity\");\r\n        var color = document.getElementById(\"colors\").setEventListener(\"select\", function(e) {return /* value de l'option */;})\r\n        panier.setItem(product._id, [quantity, color]); /*problème: ne prend pas en compte le choix de couleur */\r\n    });"]}