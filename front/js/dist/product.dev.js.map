{"version":3,"sources":["product.js"],"names":["getProduct","product","hydrateProduct","fetch","then","httpBodyResponse","json","products","productId","URL","location","href","searchParams","get","_id","error","alert","productImgContainer","document","getElementById","productImg","createElement","appendChild","setAttribute","imageUrl","altTxt","textContent","name","price","description","scrollColors","colors","color","newColor","append","panier","localStorage","console","log","setEventListener","e","quantity","setItem"],"mappings":"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","sourcesContent":["/* Gestion du contenu de la partie produit */\r\n(async function() {\r\n    const product = await getProduct();\r\n    hydrateProduct(product);\r\n})()\r\n\r\nfunction getProduct() {\r\n    return fetch(\"http://localhost:3000/api/products\")\r\n      .then(function(httpBodyResponse) {\r\n        return httpBodyResponse.json();\r\n      })\r\n      /* récupération de l'ensemble des produits: */\r\n      .then(function(products) {\r\n        /* récupération id dans l'url: */\r\n        const productId =  new URL(location.href).searchParams.get(\"id\");\r\n          /* recherche du produit correspondant: */\r\n          for (product of products) { \r\n              if (product._id == productId) {  \r\n                return product;}\r\n          }\r\n      })\r\n      .catch(function(error) {\r\n          alert(error);\r\n      });\r\n  }\r\n\r\nfunction hydrateProduct(product) {\r\n    /* Affichage image */\r\n    const productImgContainer = document.getElementById(\"item__img\");\r\n    const productImg = document.createElement(\"img\");\r\n    productImgContainer.appendChild(productImg);\r\n    productImg.setAttribute(\"src\", product.imageUrl);\r\n    productImg.setAttribute(\"alt\", product.altTxt);\r\n\r\n    /* Affichage titre */\r\n    document.getElementById(\"title\").textContent = product.name;\r\n    /* Affichage prix */\r\n    document.getElementById(\"price\").textContent = product.price;\r\n    /* Affichage description */\r\n    document.getElementById(\"description\").textContent = product.description;\r\n\r\n    /*Menu couleurs */\r\n    const scrollColors = document.getElementById(\"colors\");\r\n    for (color of product.colors) {\r\n        const newColor = document.createElement(\"option\");\r\n        newColor.setAttribute(\"value\", color);\r\n        newColor.textContent = color;\r\n        scrollColors.append(newColor);\r\n    }\r\n}\r\n\r\n/* Gestion du panier */\r\nvar panier = localStorage;\r\nconsole.log(panier);\r\n\r\ndocument\r\n    .getElementById(\"addToCart\")\r\n    .setEventListener(\"click\", function (e) {\r\n        var quantity = document.getElementById(\"quantity\");\r\n        var color = document.getElementById(\"colors\").setEventListener(\"select\", function(e) {return /* value de l'option */;})\r\n        panier.setItem(product._id, [quantity, color]); /*problème: ne prend pas en compte le choix de couleur */\r\n    });"],"file":"product.dev.js"}