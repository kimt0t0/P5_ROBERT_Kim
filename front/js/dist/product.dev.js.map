{"version":3,"sources":["product.js"],"names":["getProduct","fetch","then","httpBodyResponse","json","products","productId","URL","location","href","searchParams","get","product","_id","error","alert","hydrateProduct","productImgContainer","document","getElementById","productImg","createElement","appendChild","setAttribute","imageUrl","altTxt","textContent","name","price","description","scrollColors","colors","color","newColor","append","Cart","inventory","localStorage","itemsCounter","itemsList","totalPrice","cart","cartProduct","quantity","getProductId","console","log","getProductColor","select","index","selectedIndex","productColor","options","value","getProductQuantity","productQuantity","addEventListener","e","newCartProduct"],"mappings":"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","sourcesContent":["/* *** GÉNÉRAL *** */\r\n\r\n/* Récupération données produit */\r\nasync function getProduct() {\r\n    return fetch(\"http://localhost:3000/api/products\")\r\n      .then(function(httpBodyResponse) {\r\n        return httpBodyResponse.json();\r\n      })\r\n      /* récupération de l'ensemble des produits: */\r\n      .then(function(products) {\r\n        /* récupération id dans l'url: */\r\n        var productId =  new URL(location.href).searchParams.get(\"id\");\r\n          /* recherche du produit correspondant: */\r\n          for (product of products) { \r\n              if (product._id == productId) {  \r\n                return product;}\r\n          }\r\n      })\r\n      .catch(function(error) {\r\n          alert(error);\r\n      });\r\n}\r\n\r\n/* *** AFFICHAGE PARTIE PRODUIT *** */\r\n/* Déclencheur */\r\n(async function() {\r\n    var product = await getProduct();\r\n    hydrateProduct(product);\r\n})()\r\n\r\n/* Récupération contenu */\r\nasync function hydrateProduct(product) {\r\n    /* Affichage image */\r\n    var productImgContainer = document.getElementById(\"item__img\");\r\n    var productImg = document.createElement(\"img\");\r\n    productImgContainer.appendChild(productImg);\r\n    productImg.setAttribute(\"src\", product.imageUrl);\r\n    productImg.setAttribute(\"alt\", product.altTxt);\r\n\r\n    /* Affichage titre */\r\n    document.getElementById(\"title\").textContent = product.name;\r\n    /* Affichage prix */\r\n    document.getElementById(\"price\").textContent = product.price;\r\n    /* Affichage description */\r\n    document.getElementById(\"description\").textContent = product.description;\r\n\r\n    /*Menu couleurs */\r\n    var scrollColors = document.getElementById(\"colors\");\r\n    for (color of product.colors) {\r\n        var newColor = document.createElement(\"option\");\r\n        newColor.setAttribute(\"value\", color);\r\n        newColor.textContent = color;\r\n        scrollColors.append(newColor);\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n/* *** GESTION PANIER *** */\r\n\r\n/* CLASSES */\r\n/* Classe pour l'objet panier */\r\nclass Cart {\r\n    constructor () {\r\n        this.inventory = localStorage;\r\n        this.itemsCounter = 0;\r\n        this.itemsList = {};\r\n        this.totalPrice = 0;\r\n    }\r\n\r\n    /* fonction pour vérifier si un objet est déjà présent dans le panier */\r\n\r\n    /* fonction pour créer un nouvel objet dans le panier */\r\n\r\n    /* fonction pour ajouter une quantité à un objet existant dans le panier */\r\n}\r\n\r\nvar cart = new Cart();\r\n\r\n/* Classe pour l'objet à ajouter */\r\nclass cartProduct {\r\n    constructor(_id, color, quantity) {\r\n        this._id = _id;\r\n        this.color = color;\r\n        this.quantity = quantity;\r\n    }\r\n}\r\n\r\n/* FONCTIONS */\r\nfunction getProductId(product) {\r\n    console.log(product._id);\r\n    return product._id;\r\n}\r\n\r\nfunction getProductColor() {\r\n    var select = document.getElementById(\"colors\"),\r\n        index = select.selectedIndex;\r\n    var productColor = select.options[ index ].value;\r\n    console.log(productColor);\r\n    return productColor;\r\n}\r\n\r\nfunction getProductQuantity() {\r\n    var productQuantity = document.getElementById(\"quantity\").value;\r\n    console.log(productQuantity);\r\n    return productQuantity;\r\n}\r\n\r\n\r\n/* ACTIONS */\r\n/* Déclenchement action */\r\ndocument.getElementById(\"addToCart\").addEventListener(\"click\", async function(e) {\r\n    console.log(\"clic enregistré\");\r\n    /* récupérer l'id du produit et stocker dans var _id*/\r\n    let productId = getProductId(product);\r\n    console.log(productId);\r\n\r\n    /* récupérer la couleur et stocker dans var color */\r\n    let productColor = getProductColor();\r\n    console.log(productColor);\r\n\r\n    /* récupérer la quantité et stocker dans var quantity */\r\n    let productQuantity = getProductQuantity()\r\n    console.log(productQuantity);\r\n\r\n    /* créer un objet newProduct */\r\n    var newCartProduct = cartProduct(productId, productColor, productQuantity);\r\n    console.log(newCartProduct);\r\n});\r\n\r\n"],"file":"product.dev.js"}