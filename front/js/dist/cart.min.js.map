{"version":3,"sources":["cart.js"],"names":["productId","productColor","productQuantity","productImgUrl","cart","localStorage","cartCounter","totalPrice","Contact","firstName","lastName","address","city","email","_classCallCheck","this","value","getProduct","id","regeneratorRuntime","async","_context","prev","next","abrupt","fetch","then","httpBodyResponse","json","products","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","done","product","_id","err","error","alert","stop","setFormAttributes","inputName","regexModel","min","max","title","_context2","setAttribute","createorderGrid","orderGrid","i","cartKey","splitKey","_context3","length","key","split","includes","checkForm","e","regNames","inputsToTest","regexToTest","data","order","_context4","document","getElementById","test","name","preventDefault","console","log","awrap","sent","postOrder","method","response","hydrateDom","cartItem","cartItemImg","productImg","cartItemContent","cartItemContentDescr","cartItemContentTitle","cartItemContentColor","cartItemContentPrice","cartItemSettings","settingsQuantity","settingsQuantityText","settingsQuantityInput","deleteContainer","deleteText","_context6","createElement","regEmail","appendChild","errMessage","textContent","imageUrl","altTxt","Number","price","addEventListener","removeItem","target","closest","remove"],"mappings":"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","file":"cart.min.js","sourcesContent":["/* *** VARIABLES *** */\r\nconst cart = localStorage;\r\n\r\nvar cartCounter = 0;\r\nvar totalPrice = 0;\r\n\r\nvar productId, productColor, productQuantity, productImgUrl;\r\n\r\n\r\n\r\n/* *** CLASSES *** */\r\n\r\nclass Contact {\r\n    constructor (firstName, lastName, address, city, email) {\r\n        this.firstName = firstName.value;\r\n        this.lastName = lastName.value;\r\n        this.address = address.value;\r\n        this.city = city.value;\r\n        this.email = email.value;\r\n    }\r\n\r\n    getFirstName() {\r\n        return this.firstName;\r\n    }\r\n\r\n    getLastName() {\r\n        return this.lastName;\r\n    }\r\n\r\n    getAddress() {\r\n        return this.address;\r\n    }\r\n\r\n    getCity() {\r\n        return this.city;\r\n    }\r\n\r\n    getEmail() {\r\n        return this.email;\r\n    }\r\n}\r\n\r\n\r\n\r\n/* *** FONCTIONS *** */\r\n\r\n/* GÉNÉRAL */\r\n/* Accès aux infos produit sur serveur */\r\nasync function getProduct(id) {\r\n    return fetch(\"http://localhost:3000/api/products\")\r\n      .then(function(httpBodyResponse) {\r\n        return httpBodyResponse.json();\r\n      })\r\n      .then(function(products) {\r\n          for (product of products) { \r\n              if (product._id == id) {  \r\n                return product;}\r\n          }\r\n      })\r\n      .catch(function(error) {\r\n          alert(error);\r\n      });\r\n}\r\n\r\n/* Attributs du formulaire */\r\nasync function setFormAttributes(inputName, regexModel, min, max, title) {\r\n    inputName.setAttribute(\"pattern\", regexModel);\r\n    inputName.setAttribute(\"min-length\", min);\r\n    inputName.setAttribute(\"max-length\", max);\r\n    inputName.setAttribute(\"title\", title);\r\n}\r\n\r\n/* FORMULAIRE */\r\n\r\n/* Création tableau commande */\r\nasync function createorderGrid(cart) {\r\n    let orderGrid = [];\r\n    for(let i = 0; i < cart.length; i++) {\r\n        let cartKey = localStorage.key(i);\r\n        let splitKey = cartKey.split(\" \");\r\n        productId = splitKey[0];\r\n        if (orderGrid.includes(productId)) {\r\n        }\r\n        else {\r\n            orderGrid[i] = productId;\r\n        }\r\n    }\r\n    return orderGrid;\r\n}\r\n\r\n/* Vérification et création objet contact + tableau produits */\r\nasync function checkForm(e) {\r\n\r\n    // Éléments d'input à check:\r\n    let firstName = document.getElementById(\"firstName\");\r\n    let lastName = document.getElementById(\"lastName\");\r\n    let address = document.getElementById(\"address\");\r\n    let city = document.getElementById(\"city\");\r\n    let email = document.getElementById(\"email\");\r\n\r\n    // Regexs pour check:\r\n    const regNames = /^[a-zA-Z\\s'-]+$/;\r\n    const regAddress = /^[a-zA-Z0-9\\s,'-]*$/; //problème: valide les entrées contenant uniquement des chiffres...\r\n    const regEmail = /^[A-Za-z0-9._%+-]+@([A-Za-z0-9-]+\\.)+([A-Za-z0-9]{2,4})$/;\r\n\r\n    let inputsToTest = [firstName, lastName, address, city, email];\r\n    let regexToTest = [regNames, regNames, regAddress, regNames, regEmail];\r\n\r\n    //Indicateur mauvais remplissage:        \r\n    let error = false;\r\n    \r\n    // Pour chaque élément de la liste d'input...:\r\n    for (let i = 0; i < inputsToTest.length; i++) {\r\n        // Test:\r\n        test = regexToTest[i].test(inputsToTest[i].value);\r\n        // Si test faux ne pas envoyer et message d'erreur:\r\n        if (test == false) {\r\n            errMessage = document.getElementById(inputsToTest[i].name + \"ErrorMsg\");\r\n            errMessage.textContent = \"Ce champ est vide ou n'a pas été complété correctement.\";\r\n            error = true;\r\n        }\r\n    }\r\n    \r\n    if (error == true) {\r\n        e.preventDefault();\r\n        return alert(\"Votre commande n'a pas pu être finalisée.\\nVeuillez vérifier que vous avez complété correctement le formulaire.\\n\\nEn cas de problème, n'hésitez pas à contacter notre support\");\r\n    }\r\n    else {\r\n        e.preventDefault();\r\n        console.log(\"Envoi du formulaire...\")\r\n        Contact = new Contact(firstName, lastName, address, city, email);\r\n        const orderGrid = await createorderGrid(cart);\r\n        const data = [Contact, orderGrid];\r\n        let order = await postOrder(data);\r\n        console.log(order);\r\n    }\r\n\r\n}\r\n\r\n/* Envoi commande */\r\nasync function postOrder(data) {\r\n    fetch(\"http://localhost:3000/api/products/order\", {\r\n        method: \"POST\",\r\n        headers: {\"Content-type\": \"application/json\"},\r\n        body: JSON.stringify(data),\r\n    })\r\n    .then(function(response) {\r\n        return response.json();\r\n    })\r\n    .then(function(json){\r\n        return console.log(\"Succès: \", json);\r\n    })\r\n    .catch(function(err) {\r\n        return console.log(\"Erreur: \", err);\r\n    })\r\n}\r\n\r\n\r\n/* *** DOM DYNAMIQUE ***  */\r\nasync function hydrateDom(product, cartCounter, totalPrice, productQuantity, cartKey) {\r\n    /* ÉLÉMENTS A GÉNÉRER ET PLACER POUR AFFICHAGE */\r\n    /* Création balises */\r\n    let cartItem = document.createElement(\"article\");\r\n    let cartItemImg = document.createElement(\"div\");\r\n    let productImg = document.createElement(\"img\");\r\n\r\n    let cartItemContent = document.createElement(\"div\");\r\n    let cartItemContentDescr = document.createElement(\"div\");\r\n    let cartItemContentTitle = document.createElement(\"h2\");\r\n    let cartItemContentColor = document.createElement(\"p\");\r\n    let cartItemContentPrice = document.createElement(\"p\");\r\n\r\n\r\n    let cartItemSettings = document.createElement(\"div\");\r\n\r\n    let settingsQuantity = document.createElement(\"div\");\r\n    let settingsQuantityText = document.createElement(\"p\");\r\n    let settingsQuantityInput = document.createElement(\"input\");\r\n\r\n    let deleteContainer = document.createElement(\"div\");\r\n    let deleteText = document.createElement(\"p\");\r\n\r\n\r\n    /* Position des balises créées */\r\n    document.getElementById(\"cart__items\").appendChild(cartItem);\r\n    cartItem.appendChild(cartItemImg);\r\n    cartItemImg.appendChild(productImg);\r\n\r\n    cartItem.appendChild(cartItemContent);\r\n    cartItemContent.appendChild(cartItemContentDescr);\r\n    cartItemContentDescr.appendChild(cartItemContentTitle);\r\n    cartItemContentDescr.appendChild(cartItemContentColor);\r\n    cartItemContentDescr.appendChild(cartItemContentPrice);\r\n\r\n    cartItemContent.appendChild(cartItemSettings);\r\n\r\n    cartItemSettings.appendChild(settingsQuantity);\r\n    settingsQuantity.appendChild(settingsQuantityText);\r\n    settingsQuantity.appendChild(settingsQuantityInput);\r\n\r\n    cartItemSettings.appendChild(deleteContainer);\r\n    deleteContainer.appendChild(deleteText);\r\n\r\n\r\n    /* Attributs et contenu des balises créées */\r\n    cartItem.setAttribute(\"class\", \"cart__item\");\r\n    cartItem.setAttribute(\"data-id\", productId);\r\n    cartItem.setAttribute(\"data-color\", productColor);\r\n\r\n    cartItemImg.setAttribute(\"class\", \"cart__item__img\")\r\n\r\n    productImg.setAttribute(\"src\", product.imageUrl);\r\n    productImg.setAttribute(\"alt\", product.altTxt);\r\n\r\n\r\n    cartItemContent.setAttribute(\"class\", \"cart__item__content\");\r\n    cartItemContentDescr.setAttribute(\"class\", \"cart__item__content__description\")\r\n    cartItemContentTitle.textContent = product.name;\r\n    cartItemContentColor.textContent = productColor;\r\n    cartItemContentPrice.textContent = Number(product.price) + \" €\";\r\n\r\n    cartItemSettings.setAttribute(\"class\", \"cart__item__content__settings\");\r\n    \r\n    settingsQuantity.setAttribute(\"class\", \"cart__item__content__settings__quantity\");\r\n    settingsQuantityText.textContent = \"Qté : \" + productQuantity;\r\n    settingsQuantityInput.setAttribute(\"type\", \"number\");\r\n    settingsQuantityInput.setAttribute(\"class\", \"itemQuantity\");\r\n    settingsQuantityInput.setAttribute(\"name\", \"itemQuantity\");\r\n    settingsQuantityInput.setAttribute(\"min\", \"1\");\r\n    settingsQuantityInput.setAttribute(\"max\", \"100\");\r\n    settingsQuantityInput.setAttribute(\"value\", productQuantity);\r\n\r\n    deleteContainer.setAttribute(\"class\", \"cart__item__content__settings__delete\");\r\n    deleteText.setAttribute(\"class\", \"deleteItem\");\r\n    deleteText.textContent = \"Supprimer\";\r\n\r\n    /* Attributs et contenus de balises existantes */\r\n    document.getElementById(\"totalQuantity\").textContent = cartCounter;\r\n    document.getElementById(\"totalPrice\").textContent = totalPrice;\r\n\r\n        /* MODIFICATIONS DU PANIER */\r\n\r\n    /* /* Modification quantité: */\r\n    settingsQuantityInput.addEventListener(\"change\", function(e) {\r\n        /* (suppression de la quantité originale du produit dans compteur panier et prix total: ) */\r\n        cartCounter -= Number(productQuantity);\r\n        totalPrice -= Number(productQuantity) * Number(product.price);\r\n        /* (màj nouvelle quantité du produit: ) */\r\n        productQuantity = e.target.value;\r\n        settingsQuantityText.textContent = \"Qté : \" + productQuantity;\r\n        /* (màj compteur panier et prix total: ) */\r\n        cartCounter += Number(productQuantity);\r\n        totalPrice += Number(productQuantity) * Number(product.price);\r\n\r\n        document.getElementById(\"totalQuantity\").textContent = cartCounter;\r\n        document.getElementById(\"totalPrice\").textContent = totalPrice;\r\n        /* (màj local storage: ) */\r\n        cart[cartKey] = productQuantity;\r\n    });\r\n    \r\n    /* Suppression d'un produit du panier: */\r\n    deleteText.addEventListener(\"click\", function(e) {\r\n        cartCounter -= Number(productQuantity);\r\n        totalPrice -= Number(productQuantity) * Number(product.price);\r\n        let cartKey = productId + \" \" + productColor;\r\n        cart.removeItem(cartKey);\r\n        document.getElementById(\"totalQuantity\").textContent = cartCounter;\r\n        document.getElementById(\"totalPrice\").textContent = totalPrice;\r\n        e.target.closest(\"article\").remove();\r\n    });\r\n}\r\n\r\n/* *** ACTIONS *** */\r\n(async function() {\r\n    /* POUR CHAQUE PRODUIT DU PANIER... */\r\n    for(let i = 0; i < cart.length; i++){\r\n        /* Infos en local storage: */\r\n        var cartKey = localStorage.key(i);\r\n        var splitKey = cartKey.split(\" \");\r\n        productId = splitKey[0];\r\n        productColor = splitKey[1];\r\n        /* Quantité (input): */\r\n        productQuantity = cart.getItem(cartKey);\r\n        /* Màj compteur d'items */\r\n        cartCounter += Number(productQuantity);\r\n\r\n        /* Infos serveur: */\r\n        var product = await getProduct(productId);\r\n        totalPrice += Number(productQuantity) * Number(product.price);\r\n\r\n        /* Génération contenu page au loading: */\r\n        var pageContent = await hydrateDom(product, cartCounter, totalPrice, productQuantity, cartKey);\r\n    }\r\n    \r\n    /* REMPLISSAGE ET VÉRFICATIONS FORMULAIRE */\r\n    /* Accès au formulaire */\r\n    var userForm = document.getElementById(\"cart__order__form\");\r\n    userForm.addEventListener(\"submit\", function (e) {\r\n        checkForm(e);\r\n    });\r\n\r\n})()\r\n\r\n        \r\n\r\n\r\n"]}