{"version":3,"sources":["cart.js"],"names":["split","productId","productColor","productQuantity","productPrice","productImgUrl","total","cart","localStorage","splitCartProduct","cartProduct","regeneratorRuntime","async","_context","prev","next","console","log","abrupt","stop","fetch","then","httpBodyResponse","json","products","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","done","product","value","_id","id","err","error","alert","addLineToCart","cartItem","cartItemImg","productImg","cartItemContent","cartItemContentDescr","cartItemContentTitle","cartItemContentColor","cartItemContentPrice","cartItemSettings","settingsQuantity","settingsQuantityText","settingsQuantityInput","deleteContainer","deleteText","_context3","document","createElement","setAttribute","imageUrl","altTxt","textContent","name","price","appendChild","cartKey","key","i","getElementById","getItem"],"mappings":"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","file":"cart.min.js","sourcesContent":["/* *** VARIABLES *** */\r\nvar cart = localStorage;\r\nvar split, productId, productColor, productQuantity, productPrice, productImgUrl, total;\r\n\r\n\r\n\r\n/* *** FONCTIONS *** */\r\n\r\n/* GÉNÉRAL */\r\n/* Récupération id et couleur du produit */\r\nasync function splitCartProduct(cartProduct) {\r\n    split = cartProduct.split(\" \");\r\n    console.log(split);\r\n    return split;\r\n}\r\n\r\n/* Accès aux infos produit sur serveur */\r\nasync function getProduct(id) {\r\n    return fetch(\"http://localhost:3000/api/products\")\r\n      .then(function(httpBodyResponse) {\r\n        return httpBodyResponse.json();\r\n      })\r\n      .then(function(products) {\r\n          for (product of products) { \r\n              if (product._id == id) {  \r\n                return product;}\r\n          }\r\n      })\r\n      .catch(function(error) {\r\n          alert(error);\r\n      });\r\n}\r\n\r\n/* LIGNE PANIER */\r\nasync function addLineToCart(product) {\r\n    /* Création balises */\r\n    let cartItem = document.createElement(\"article\");\r\n    let cartItemImg = document.createElement(\"div\");\r\n    let productImg = document.createElement(\"img\");\r\n\r\n    let cartItemContent = document.createElement(\"div\");\r\n    let cartItemContentDescr = document.createElement(\"div\");\r\n    let cartItemContentTitle = document.createElement(\"h2\");\r\n    let cartItemContentColor = document.createElement(\"p\");\r\n    let cartItemContentPrice = document.createElement(\"p\");\r\n\r\n\r\n    let cartItemSettings = document.createElement(\"div\");\r\n\r\n    let settingsQuantity = document.createElement(\"div\");\r\n    let settingsQuantityText = document.createElement(\"p\");\r\n    let settingsQuantityInput = document.createElement(\"input\");\r\n\r\n    let deleteContainer = document.createElement(\"div\");\r\n    let deleteText = document.createElement(\"p\");\r\n\r\n    /* Attributs et contenu des balises */\r\n    cartItem.setAttribute(\"class\", \"cart__item\");\r\n    cartItem.setAttribute(\"data-id\", productId);\r\n    cartItem.setAttribute(\"data-color\", productColor);\r\n\r\n    cartItemImg.setAttribute(\"class\", \"cart__item__img\")\r\n\r\n    productImg.setAttribute(\"src\", product.imageUrl);\r\n    productImg.setAttribute(\"alt\", product.altTxt);\r\n\r\n\r\n    cartItemContent.setAttribute(\"class\", \"cart__item__content\");\r\n    cartItemContentDescr.setAttribute(\"class\", \"cart__item__content__description\")\r\n    cartItemContentTitle.textContent = product.name;\r\n    cartItemContentColor.textContent = productColor;\r\n    cartItemContentPrice.textContent = product.price + \" €\";\r\n\r\n    cartItemSettings.setAttribute(\"class\", \"cart__item__content__settings\");\r\n    \r\n    settingsQuantity.setAttribute(\"class\", \"cart__item__content__settings__quantity\");\r\n    settingsQuantityText.textContent = \"Qté : \" + productQuantity;\r\n    settingsQuantityInput.setAttribute(\"type\", \"number\");\r\n    settingsQuantityInput.setAttribute(\"class\", \"itemQuantity\");\r\n    settingsQuantityInput.setAttribute(\"name\", \"itemQuantity\");\r\n    settingsQuantityInput.setAttribute(\"min\", \"1\");\r\n    settingsQuantityInput.setAttribute(\"max\", \"100\");\r\n    settingsQuantityInput.setAttribute(\"value\", productQuantity);\r\n\r\n    deleteContainer.setAttribute(\"class\", \"cart__item__content__settings__delete\");\r\n    deleteText.setAttribute(\"class\", \"deleteItem\");\r\n    deleteText.textContent = \"Supprimer\";\r\n\r\n\r\n    /* Position des balises */\r\n    document.getElementById(\"cart__items\").appendChild(cartItem);\r\n    cartItem.appendChild(cartItemImg);\r\n    cartItemImg.appendChild(productImg);\r\n\r\n    document.getElementById(\"cart__items\").appendChild(cartItemContent);\r\n    cartItemContent.appendChild(cartItemContentDescr);\r\n    cartItemContentDescr.appendChild(cartItemContentTitle);\r\n    cartItemContentDescr.appendChild(cartItemContentColor);\r\n    cartItemContentDescr.appendChild(cartItemContentPrice);\r\n\r\n\r\n    document.getElementById(\"cart__items\").appendChild(cartItemSettings);\r\n\r\n    cartItemSettings.appendChild(settingsQuantity);\r\n    settingsQuantity.appendChild(settingsQuantityText);\r\n    settingsQuantity.appendChild(settingsQuantityInput);\r\n\r\n    cartItemSettings.appendChild(deleteContainer);\r\n    deleteContainer.appendChild(deleteText);\r\n\r\n\r\n}\r\n\r\n/* MODIFICATIONS PANIER */\r\nfunction changeQuantity() {}\r\n\r\nfunction deleteProduct() {}\r\n\r\n\r\n\r\n/* *** ACTIONS *** */\r\n(async function() {\r\n    /* Pour chaque élément du panier... */\r\n    for(let i = 0; i < cart.length; i++){\r\n        /* Obtention infos localStorage */\r\n        let cartKey = localStorage.key(i);\r\n        var splitKey = cartKey.split(\" \");\r\n        productId = splitKey[0];\r\n        productColor = splitKey[1];\r\n        productQuantity = Number(cart.getItem(cartKey));\r\n\r\n        /* Obtention infos serveur */\r\n        var product = await getProduct(productId);\r\n\r\n        /* Fonction d'affichage de la ligne*/\r\n        var newLine = await addLineToCart(product);\r\n\r\n        /* Écoute des événements et update ligne */\r\n    }\r\n})()"]}